# LDIP Backend Environment Configuration
# Copy this file to .env and fill in your values

# Application Settings
DEBUG=true
API_VERSION=v1

# Supabase Configuration
# Get these from your Supabase project settings
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-role-key
# JWT Secret for local token validation (Supabase Dashboard -> Settings -> API -> JWT Settings)
SUPABASE_JWT_SECRET=your-jwt-secret

# Redis Configuration
# Local development: redis://localhost:6379/0
# Production: use managed Redis URL
REDIS_URL=redis://localhost:6379/0

# Celery Configuration
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# LLM API Keys
# OpenAI - for GPT-4 (reasoning, user-facing Q&A) and embeddings
OPENAI_API_KEY=sk-...
# Google - for Gemini (OCR, extraction tasks)
GOOGLE_API_KEY=...
# Cohere - for Rerank v3.5 (search relevance refinement)
# Get API key from: https://dashboard.cohere.com/api-keys
COHERE_API_KEY=...

# Gemini Configuration (Entity Extraction)
# Required for entity extraction (PERSON, ORG, INSTITUTION, ASSET)
# Can use the same key as GOOGLE_API_KEY if using Google AI Studio
GEMINI_API_KEY=...
# Valid models: gemini-2.0-flash (recommended), gemini-1.5-pro
# See available models: https://ai.google.dev/models/gemini
GEMINI_MODEL=gemini-2.0-flash

# Google Cloud (for Document AI OCR)
GOOGLE_CLOUD_PROJECT_ID=your-project-id
GOOGLE_CLOUD_LOCATION=us
GOOGLE_DOCUMENT_AI_PROCESSOR_ID=your-processor-id

# Authentication (choose ONE method):
# Option 1 - Local development: Set file path to service account JSON
# GOOGLE_APPLICATION_CREDENTIALS=C:\path\to\service-account.json
#
# Option 2 - Production (Railway/Cloud): Paste entire JSON content here
# Copy the contents of your service account JSON file and paste as single line
# GOOGLE_APPLICATION_CREDENTIALS_JSON={"type":"service_account","project_id":"...","private_key":"...",...}

# CORS Configuration
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000

# Axiom Logging (Production Observability)
# Get these from your Axiom account: https://axiom.co
# Leave empty to disable Axiom logging (falls back to stdout JSON)
AXIOM_TOKEN=xaat-your-api-token
AXIOM_DATASET=ldip-logs

# Rate Limiting (Story 13.3)
# Configure per-minute limits for different endpoint tiers
# Defaults shown - adjust based on production load
RATE_LIMIT_DEFAULT=100     # Standard CRUD operations (matters, entities, etc.)
RATE_LIMIT_CRITICAL=30     # LLM/chat endpoints (expensive)
RATE_LIMIT_SEARCH=60       # Vector search endpoints
RATE_LIMIT_READONLY=120    # Dashboard/stats (read-only, high frequency)
RATE_LIMIT_HEALTH=300      # Health/monitoring endpoints
RATE_LIMIT_EXPORT=20       # PDF export generation (CPU-intensive)

# Admin Configuration (Story gap-5.2: LLM Quota Monitoring Dashboard)
# Comma-separated list of admin email addresses
# These users can access /admin pages and admin-only API endpoints
ADMIN_EMAILS=admin@example.com,ops@example.com

# Email Notifications (Gap #19: Processing Completion Emails)
# Resend API for sending email notifications
# Get your API key from: https://resend.com/api-keys
RESEND_API_KEY=re_xxxxxxxxxxxx
EMAIL_FROM_ADDRESS=noreply@jaanch.com        # Must be verified in Resend dashboard
EMAIL_NOTIFICATIONS_ENABLED=true             # Global feature flag
EMAIL_BASE_URL=https://app.jaanch.com        # Base URL for deep links
